<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Відгуки — Potolok.kh</title>
  <link rel="stylesheet" href="styles.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-61EMVPPMDT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-61EMVPPMDT');
</script>


<style>
/* === Callback button & modal (polished) === */
.callback-btn-primary{
  background:#16a34a; color:#fff !important;
  padding:8px 14px; margin-right:10px;
  border-radius:8px; font-weight:600;
  text-decoration:none; display:inline-block;
  line-height:1; transition:background .2s ease;
}
.callback-btn-primary:hover{ background:#15803d; }
.callback-btn-primary:focus{ outline:2px solid rgba(22,163,74,.35); outline-offset:2px; }

.callback-modal{ position:fixed; inset:0; background:rgba(0,0,0,.5);
  display:flex; align-items:center; justify-content:center; z-index:9999; }
.callback-card{ background:#fff; padding:25px 20px; border-radius:12px;
  box-shadow:0 8px 30px rgba(0,0,0,.2); width:min(420px,92vw); position:relative; }
.close-btn{ position:absolute; top:10px; right:14px; font-size:22px;
  border:none; background:transparent; cursor:pointer; }
#callbackForm label{ display:block; margin:10px 0 4px; font-weight:600; }
#callbackForm input{ width:100%; padding:10px 12px; border:1px solid #ddd; border-radius:8px; }
#callbackForm .submit-btn{ margin-top:14px; width:100%; padding:12px; border:0; border-radius:8px;
  font-size:16px; background:#16a34a; color:#fff; cursor:pointer; font-weight:600; }
#callbackForm .submit-btn:hover{ background:#15803d; }
.status{ min-height:20px; margin-top:10px; font-size:14px; }
.status.ok{ color:#16a34a; } .status.err{ color:#dc2626; }
</style>


<style>
/* Floating CTA on mobile */
@media (max-width: 768px){
  .callback-fab{
    position: fixed; right: 14px; bottom: 18px;
    background:#16a34a; color:#fff; border:0;
    border-radius: 999px; padding: 14px 18px;
    font-weight:700; box-shadow:0 8px 24px rgba(0,0,0,.25);
    z-index: 10000; text-decoration:none;
  }
  .callback-fab:hover{ background:#15803d; }
}
</style>

</head>
<body>
<div class="nav-inline"><a class="btn" href="gallery.html">Наші роботи</a></div>

  
<nav class="nav">
  <div class="row container">
    <div class="brand">Potolok.kh</div>
    <div class="links"><a href="index.html" class="">Головна</a><a href="gallery.html" class="">Галерея</a><a href="price.html" class="">Прайс</a><a href="calculator.html" class="">Калькулятор</a><a href="reviews.html" class="active">Відгуки</a></div>
  </div>
</nav>

  <main class="container">
    <h1>Відгуки клієнтів</h1>
    <div class="grid">
      <div class="card"><div class="pad">
        <p>“Зроблено швидко та охайно. Рекомендую!”</p>
        <p class="small">— Олександр, Харків</p>
      </div></div>
      <div class="card"><div class="pad">
        <p>“Гарна ціна та якість. Повернусь ще.”</p>
        <p class="small">— Наталія, Рогань</p>
      </div></div>
    </div>

   <h3 style="margin-top:16px">Залишити відгук</h3>

<form id="reviewForm" class="card">
  <div class="pad">
    <div class="row">
      <div>
        <label>Ім’я</label>
        <input class="input" type="text" name="name" id="rvName" placeholder="Ваше ім’я">
      </div>
      <div>
        <label>Телефон</label>
        <input class="input" type="tel" name="phone" id="rvPhone" placeholder="+380XXXXXXXXX">
      </div>
    </div>

    <div style="margin-top:10px">
      <label>Відгук</label>
      <textarea class="input" name="message" id="rvMsg" rows="4" required placeholder="Ваші враження…"></textarea>
    </div>

    <div style="margin-top:12px">
      <button class="btn" type="submit">Надіслати</button>
    </div>

    <p id="rvStatus" class="small" style="margin-top:6px"></p>
  </div>
</form>
  </main>
  <footer class="footer">© 2025 Potolok.kh • Харків • Монтаж натяжних стель</footer>

<div id="callbackModal" class="callback-modal" style="display:none;">
  <div class="callback-card">
    <button id="closeCallback" class="close-btn" aria-label="Закрити">×</button>
    <h3>Заявка на дзвінок</h3>
    <form id="callbackForm" novalidate>
      <label for="cbName">Ваше ім'я (необов'язково)</label>
      <input type="text" id="cbName" name="name" placeholder="Іван">
      <label for="cbPhone">Номер телефону</label>
      <input type="tel" id="cbPhone" name="phone" placeholder="+380XXXXXXXXX" required>
      <input type="text" name="company" id="cbCompany" style="display:none" tabindex="-1" autocomplete="off">
      <button type="submit" class="submit-btn">Відправити</button>
      <p id="cbStatus" class="status"></p>
    </form>
  </div>
</div>


<script>(function(){
  const openBtn=document.getElementById('openCallback');
  const modal=document.getElementById('callbackModal');
  const closeBtn=document.getElementById('closeCallback');
  const form=document.getElementById('callbackForm');
  const phone=document.getElementById('cbPhone');
  const status=document.getElementById('cbStatus');
  const honeypot=document.getElementById('cbCompany');
  if(openBtn&&modal){openBtn.addEventListener('click',e=>{e.preventDefault();modal.style.display='flex';});}
  if(closeBtn){closeBtn.addEventListener('click',()=>{modal.style.display='none';status.textContent='';status.className='status';});}
  if(modal){modal.addEventListener('click',e=>{if(e.target===modal){modal.style.display='none';status.textContent='';status.className='status';}});}
  if(phone){phone.addEventListener('input',()=>{let v=phone.value.replace(/[^\d+]/g,'');if(!v.startsWith('+')) v='+38'+v.replace(/^\+/,'');phone.value=v;});}
  if(form){form.addEventListener('submit',async e=>{
    e.preventDefault();status.textContent='';status.className='status';
    if(honeypot.value){return;}
    const name=(document.getElementById('cbName')||{}).value?.trim()||'';
    const ph=phone.value.trim();
    if(!/^\+?38\d{10}$/.test(ph.replace(/\s/g,''))){status.textContent='Перевірте номер телефону у форматі +380XXXXXXXXX';status.classList.add('err');return;}
    try{
      const res=await fetch('/.netlify/functions/telegram-submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,phone:ph})});
      const data=await res.json().catch(()=>({}));
      if(res.ok&&data.ok){status.textContent='Дякуємо! Ми передзвонимо найближчим часом.';status.classList.add('ok');form.reset();setTimeout(()=>{modal.style.display='none';status.textContent='';status.className='status';},1200);}
      else{status.textContent='Помилка відправки. Спробуйте ще раз або напишіть нам.';status.classList.add('err');}
    }catch(e){status.textContent='Сталася помилка. Спробуйте ще раз або напишіть нам.';status.classList.add('err');}
  });}
})();</script>


<a id="openCallbackFab" href="#" class="callback-fab">Залишити заявку</a>


<script>
// Link floating CTA to modal
(function(){
  const fab=document.getElementById('openCallbackFab');
  const modal=document.getElementById('callbackModal');
  if(fab&&modal){
    fab.addEventListener('click',function(e){ e.preventDefault(); modal.style.display='flex'; });
  }
})();
</script>

<!-- інші скрипти, якщо є -->
  
  <script>
  (function () {
    const form   = document.getElementById('reviewForm');
    const status = document.getElementById('rvStatus');
    const nameEl = document.getElementById('rvName');
    const phoneEl= document.getElementById('rvPhone');
    const msgEl  = document.getElementById('rvMsg');

    if (!form) return;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      status.textContent = 'Відправляємо...';
      status.style.color = '';

      const name = (nameEl.value || '').trim();
      const phone= (phoneEl.value || '').trim();
      const msg  = (msgEl.value || '').trim();

      if (!msg) {
        status.textContent = 'Напишіть відгук.';
        status.style.color = '#dc2626';
        return;
      }

      try {
        const payload = {
          name,
          phone,
          message: 'Відгук зі сторінки reviews: ' + msg
        };

        const resp = await fetch('/api/telegram-submit', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        const data = await resp.json().catch(() => ({}));

        if (resp.ok && data.ok) {
          status.textContent = 'Дякуємо! Відгук надіслано.';
          status.style.color = '#16a34a';
          form.reset();
        } else {
          status.textContent = 'Не вдалось надіслати. Спробуйте ще раз.';
          status.style.color = '#dc2626';
        }
      } catch (err) {
        status.textContent = 'Помилка мережі. Спробуйте пізніше.';
        status.style.color = '#dc2626';
      }
    });
  })();
  </script>
<script>
(function () {
  const SHEETS_ENDPOINT = 'https://script.google.com/macros/s/AKfycbxyw2D96qoon3m_BPSl7WuAA015zWPX5WhtZwLJxie3Wn7YHB7nvz4qjl9r-kyoJAlk/exec';

  const form = document.querySelector('form[name="reviews"]');
  if (!form) return;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const payload = Object.fromEntries(formData.entries());

    try {
      const resp = await fetch(SHEETS_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      });

      const data = await resp.json().catch(() => ({}));
      if (resp.ok && data.result === 'success') {
        console.log('Відгук успішно збережено в таблиці');
      } else {
        console.error('Помилка збереження в таблицю', data);
      }
    } catch (err) {
      console.error('Помилка мережі', err);
    }
  });
})();
</script>
<!-- тут закінчується основний контент сторінки -->

    <script>
    (function () {
      const SHEETS_ENDPOINT = 'https://script.google.com/macros/s/AKfycybxw2D96qoon3m_BPSl7WuAA015zWPX5WhtZwLJxie3Wn7YHB7nvz4qjl9r-kyoJAlk/exec';

      const form = document.querySelector('form[name="reviews"]');
      if (!form) return;

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const payload = Object.fromEntries(formData.entries());

        try {
          const resp = await fetch(SHEETS_ENDPOINT, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
          });

          const data = await resp.json().catch(() => ({}));
          if (resp.ok && data.ok) {
            console.log('✅ Відгук успішно збережено у таблицю');
          } else {
            console.error('❌ Помилка збереження у таблицю', data);
          }
        } catch (err) {
          console.error('⚠️ Помилка мережі', err);
        }
      });
    })();
    </script>

</body>
</html>
</html>
