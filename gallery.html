<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Наші роботи — Potolok.kh</title>
  <meta name="description" content="Галерея натяжних стель. 50 фото. Автоперегортання, повноекранний перегляд, стрілки, точки, свайп.">
  <style>
    :root{
      --bg:#0b1220; --panel:#0f172a; --ring:#1f2a44; --text:#e5e7eb;
      --muted:#94a3b8; --accent:#22d3ee; --btn:#16a34a;
      --shadow:0 8px 30px rgba(2,6,23,.35); --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    header{display:flex;justify-content:space-between;align-items:center}
    .brand{font-weight:800;display:flex;gap:8px;align-items:center}
    .brand .dot{width:10px;height:10px;border-radius:999px;background:var(--accent)}
    .phone{background:var(--btn);color:#fff;padding:8px 12px;border-radius:12px;box-shadow:var(--shadow)}
    h1{margin:12px 0 6px;font-size:28px}
    .muted{color:var(--muted)}
    .stage-wrap{background:var(--panel);border:1px solid var(--ring);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;margin-top:12px}
    .top-controls{display:flex;justify-content:flex-end;gap:8px;padding:8px;border-bottom:1px solid var(--ring)}
    .tiny-btn{background:#101b33;border:1px solid var(--ring);color:#fff;padding:6px 10px;border-radius:8px;cursor:pointer}
    .stage{position:relative;aspect-ratio:16/10;width:100%;background:#050a18;display:flex;align-items:center;justify-content:center}
    .stage img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    .nav-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(17,24,39,.6);border:1px solid var(--ring);color:#fff;width:40px;height:40px;border-radius:50%;cursor:pointer}
    .prev{left:10px}.next{right:10px}
    .nav-btn:hover{background:rgba(17,24,39,.8)}
    .dots{display:flex;gap:6px;justify-content:center;padding:10px;border-top:1px solid var(--ring)}
    .dot{width:8px;height:8px;border-radius:999px;background:#2b3756;border:1px solid var(--ring);opacity:.7}
    .dot.active{background:#22d3ee;opacity:1}
    .caption{color:var(--muted);text-align:center;padding:2px 12px 12px}
    footer{margin-top:14px;color:#94a3b8;font-size:14px}
    @media (max-width:560px){ .nav-btn{width:36px;height:36px} }
  </style>
</head>
<body>
  <header class="container">
    <div class="brand"><span class="dot"></span><span>Potolok.kh</span></div>
    <a class="phone" href="tel:+380974546713">+38 (097) 454-67-13</a>
  </header>

  <main class="container">
    <h1>Наші роботи</h1>
    <p class="muted">50 фото. Автоперегортання кожні 2 секунди. Стрілки, точки, свайп і повноекранний перегляд.</p>

    <div class="stage-wrap">
      <div class="top-controls">
        <button id="pauseBtn" class="tiny-btn" title="Пауза">▌▌</button>
        <button id="fullBtn" class="tiny-btn" title="Повний екран">⛶</button>
      </div>

      <div id="stage" class="stage">
        <button id="prevBtn" class="nav-btn prev" aria-label="Попереднє">‹</button>
        <img id="view" src="" alt="фото робіт"/>
        <button id="nextBtn" class="nav-btn next" aria-label="Наступне">›</button>
      </div>

      <div class="dots" id="dots"></div>
      <div class="caption" id="cap"></div>
    </div>

    <footer>© Potolok.kh • Харків • <a class="phone" href="tel:+380974546713">+38 (097) 454-67-13</a></footer>
  </main>

  <script>
    // ---------- список файлів у /images ----------
    var images = [];
    (function buildList(){
      for(var i=1;i<=30;i++){
        var n = ('0'+i).slice(-2);
        images.push('/images/img'+n+'.jpg');
      }
      for(var j=1;j<=20;j++){
        var m = ('0'+j).slice(-2);
        images.push('/images/new_img'+m+'.jpg');
      }
    })();
// підпис "Фото X / 50 — ім'я"
    function makeCaption(i,total){
      var parts = images[i].split('/'); 
      var name = parts[parts.length-1];
      return 'Фото ' + (i+1) + ' / ' + total + ' — ' + name;
    }

    // ---------- DOM ----------
    var view   = document.getElementById('view');
    var cap    = document.getElementById('cap');
    var dotsW  = document.getElementById('dots');
    var prevBt = document.getElementById('prevBtn');
    var nextBt = document.getElementById('nextBtn');
    var pauseB = document.getElementById('pauseBtn');
    var fullB  = document.getElementById('fullBtn');
    var stage  = document.getElementById('stage');

    // точки
    var dots = images.map(function(_,i){
      var d = document.createElement('span');
      d.className = 'dot';
      d.title = String(i+1) + '/' + String(images.length);
      d.addEventListener('click', (function(k){ return function(){ show(k); }; })(i));
      dotsW.appendChild(d);
      return d;
    });

    // стан
    var idx = 0;
    var timer = null;
    var INTERVAL = 2000;
    var playing = true;

    function show(i){
      idx = (i + images.length) % images.length;
      // прелоад наступного
      var next = new Image();
      next.src = images[(idx+1)%images.length];

      view.src = images[idx];
      cap.textContent = makeCaption(idx, images.length);

      for(var k=0;k<dots.length;k++){ dots[k].classList.remove('active'); }
      dots[idx].classList.add('active');
    }
    function next(){ show(idx+1); }
    function prev(){ show(idx-1); }

    function play(){
      playing = true;
      pauseB.textContent = '▌▌';
      tick();
    }
    function pause(){
      playing = false;
      pauseB.textContent = '►';
      if(timer){ clearTimeout(timer); timer = null; }
    }
    function tick(){
      if(!playing) return;
      if(timer){ clearTimeout(timer); }
      timer = setTimeout(function(){ next(); tick(); }, INTERVAL);
    }

    // керування
    nextBt.addEventListener('click', function(){ pause(); next(); play(); });
    prevBt.addEventListener('click', function(){ pause(); prev(); play(); });
    pauseB.addEventListener('click', function(){ if(playing) pause(); else play(); });

    // свайп
    var sx=0;
    stage.addEventListener('touchstart', function(e){ sx = e.touches[0].clientX; }, {passive:true});
    stage.addEventListener('touchend', function(e){
      var ex = e.changedTouches[0].clientX;
      if(Math.abs(ex - sx) > 40){ if(ex < sx) next(); else prev(); pause(); play(); }
    }, {passive:true});

    // клавіатура
    window.addEventListener('keydown', function(e){
      if(e.key === 'ArrowRight'){ pause(); next(); play(); }
      if(e.key === 'ArrowLeft'){  pause(); prev(); play(); }
      if(e.key === ' '){ e.preventDefault(); if(playing) pause(); else play(); }
      if(e.key === 'f'){ toggleFull(); }
      if(e.key === 'Escape'){ if(document.fullscreenElement){ document.exitFullscreen(); } }
    });

    // повний екран
    function toggleFull(){
      var el = document.documentElement;
      if(!document.fullscreenElement){
        if(el.requestFullscreen){ el.requestFullscreen(); }
        else if(el.webkitRequestFullscreen){ el.webkitRequestFullscreen(); }
        else if(el.msRequestFullscreen){ el.msRequestFullscreen(); }
      }else{
        if(document.exitFullscreen){ document.exitFullscreen(); }
        else if(document.webkitExitFullscreen){ document.webkitExitFullscreen(); }
        else if(document.msExitFullscreen){ document.msExitFullscreen(); }
      }
    }
    fullB.addEventListener('click', toggleFull);

    // старт
    // швидка перевірка на доступність першої фотки
    var test = new Image();
    test.onload = function(){ show(0); play(); };
    test.onerror = function(){ cap.textContent = 'Фото тимчасово недоступні'; };
    test.src = images[0];
  </script>
</body>
</html>
